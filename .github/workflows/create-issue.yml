name: Create Issue

on:
  workflow_dispatch:
    inputs:
      repository:
        description: 'Owner/repo to create issue in (e.g. octocat/Hello-World)'
        default: 'juri1212/idea-collection'
        required: true
      title:
        description: 'Issue title'
        default: 'New Issue from GitHub Actions'
        required: true
      body:
        description: 'Issue body (optional)'
        required: false
      labels:
        description: 'Comma-separated labels (optional)'
        required: false

jobs:
  create_issue:
    runs-on: ubuntu-latest
    steps:
      - name: Create issue via GitHub API
        uses: actions/github-script@v8
        with:
          github-token: ${{ secrets.GH_TOKEN }}
          script: |
            const inputs = context.payload.inputs || {};
            const repoInput = inputs.repository;
            if (!repoInput) throw new Error('repository input required, format owner/repo');
            const parts = repoInput.split('/');
            if (parts.length !== 2) throw new Error('repository must be in owner/repo format');
            const owner = parts[0];
            const repo = parts[1];
            const title = inputs.title || 'No title provided';
            const body = inputs.body || '';
            const labels = inputs.labels ? inputs.labels.split(',').map(l => l.trim()).filter(Boolean) : [];
            const resp = await github.rest.issues.create({ owner, repo, title, body, labels });
            console.log(`Issue created: #${resp.data.number}`);
